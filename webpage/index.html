<!DOCTYPE html>
<html lang="ru" xml:lang="ru" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv=Content-Type content="text/html;charset=UTF-8">
  <meta name=viewport content="width=device-width, minimum-scale=0.25,initial-scale=1.0" />
  <meta name=apple-mobile-web-app-capable content=yes>
  <meta name=apple-mobile-web-app-status-bar-style content=default>
  <link rel=apple-touch-icon type="image/png" href=logo.png>
  <link rel=icon type="image/png" href=favicon.png />
  <link rel=stylesheet title=base href=style.css type="text/css" />
  <style></style>
  <script src=script.js></script>
  <title>РАДИОЛА</title>
</head>

<body>
  <div id="HEADER" onclick="ScrollUp();return!1;">
    <div class="LEFT">
      <img src="logo.png">
    </div>
    <div class="RIGHT">
      <br>
      <br>
      <br>
      <br>
      <div id="rssi"></div>
      <div id="curtemp"></div>
      <div id="rpmfan"></div>
      <br>
    </div>
    <div id="HEAD">
      <span class="bold4">
        <span id="meta">Радиола</span>
      </span>
    </div>
  </div>
  <div id="MAIN">
    <!-- The Modal Edit window-->
    <div id="editStationDiv" class="modal">
      <div class="modal-content">
        <h1>Редактирование станции</h1>
        <div class="section modal-body">
          <p>
            <span class="bold">Номер слота: </span>
            <input type="text" id="add_slot" disabled="" name="slot">
            <br>
            <span class="bold">Имя: </span>
            <input type="text" style="width:350px;" id="add_name" name="name">
            <br>
            <span class="bold">Полный URL: </span>
            <input type="text" style="width:350px;" id="add_URL" name="URL" onkeyup="parseEditURL()"
              onmouseup="parseEditURL()">
            <br>или<br>
            <span class="bold">URL: </span>
            <input type="text" id="add_url" name="url" onkeyup="buildAddURL()">
            <br>
            <span class="bold">Порт: </span>
            <input type="text" id="add_port" name="port" value="80" onkeyup="buildAddURL()">
            <br>
            <span class="bold">Путь: </span>
            <input type="text" id="add_path" name="path" value="/" onkeyup="buildAddURL()">
            <br>
            <br>
            <input type="button" onclick="saveStation()" value="сохранить"> &nbsp;
            <input type="button" onclick="eraseStation()" value="стереть"> &nbsp;
            <input type="button" onclick="abortStation()" value="выйти">
          </p>
          <br>
        </div>
      </div>
    </div>
    <div class="modal" id="editIrKeyDiv">
      <div class="modal-content">
        <h1>Обучение кнопки пульта</h1>
        <div class="section modal-body">
          <p>Нажмите кнопку пульта для получения кода.</p>
          <input id="key_num" name="key_num" type="hidden">
          <table>
            <tbody>
              <tr>
                <td>Название кнопки:</td>
                <td colspan="2" id="key_name" rowspan="1"></td>
              </tr>
              <tr>
                <td>Текущий код:</td>
                <td id="current_key"></td>
                <td><input onclick="eraseIrKey()" type="button" value="Стереть код"></td>
              </tr>
              <tr>
                <td>Новый код:</td>
                <td id="new_key"></td>
                <td><input onclick="saveIrKey(document.getElementById('key_num').value)" type="button"
                    value="Применить"></td>
              </tr>
              <tr>
                <td colspan="2" rowspan="1"><input onclick="clearAllKey()" type="button" value="Стереть все коды"></td>
                <td><input onclick="abortIrKey()" type="button" value="Выйти"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- The END Modal Edit window-->
    <div data-tabs>
      <div id="PLAYER" class="active">РАДИО</div>
      <div id="STATIONS">СТАНЦИИ</div>
      <div id="SOUND">ЗВУК</div>
      <div id="SETTINGS">НАСТРОЙКИ</div>
    </div>
    <div data-panes>
      <div class="active">
        <!-- PLAY РАДИО -->
        <h1>Управление станциями</h1>
        <div class="section">
          <div class="bold2">Автовоспроизведение
            <div class="OffOn">
              <input type="checkbox" id="aplay" onclick="autoplay()" class="OffOn">
              <label for="aplay"></label>
            </div>
          </div>
          <br>
          <p>
            <select id="stationsSelect" onchange="Select()"></select>
          </p>
          <!-- <span id=np> -->
          <div class="icons">
            <div class="icons8" title="Предыдущая станция" onclick="prevStation()">
              <i class="icono-previous"></i>
            </div>
            <div class="icons8" title="Воспроизведение станции" onclick="playStation()">
              <i class="icono-play"></i>
            </div>
            <div class="icons8" title="Остановить воспроизведение" onclick="stopStation()">
              <i class="icono-stop"></i>
            </div>
            <div class="icons8" title="Следующая станция" onclick="nextStation()">
              <i class="icono-next"></i></div>
            <br>
          </div>
          <!-- </span> -->
          <br>
          <table>
            <tbody>
              <tr>
                <td>Громкость:</td>
                <td id="vol1_span">0 Дб</td>
              </tr>
              <tr>
                <td colspan="2"><input id="vol1_range" max="254" min="0" name="vol1"
                    oninput="onRangeVolChange(this.value,true)" style="height:25px;" type="range"></td>
              </tr>
            </tbody>
          </table>
          <br>
        </div>
        <h1>Станция № <span id="curst"></span></h1>
        <div class="section">
          <div class="bold2">Подробно
            <div class="OffOn">
              <input type="checkbox" id="Full" onclick="full()" class="OffOn">
              <label for="Full"></label>
            </div>
          </div>
          <p>
            <span class="bold1">Имя: </span>
            <span id="name"></span> &nbsp;&nbsp;
            <img id="icon" src="/" alt="" height="16" width="16">
          </p>
          <p>
            <span id="ldescr">
              <span class="bold1">Описание: </span>
              <span id="descr"></span>
            </span>
          </p>
          <p>
            <span id="lnot1">
              <span class="bold1">Заметка: </span>
              <span id="not1"></span>
              <span id="not2"></span>
            </span>
          </p>
          <p>
            <span id="lgenre">
              <span class="bold1">Жанр: </span>
              <span id="genre"></span>
            </span>
          </p>
          <p>
            <span id="lurl">
              <span class="bold1">URL: </span>
              <a target="_blank" id="url2" href="">
                <span id="url1"></span>
              </a>
            </span>
          </p>
          <p>
            <span id="lbitr">
              <span class="bold1">Битрейт: </span>
              <span id="bitr"></span>
            </span>
          </p>
          <br>
        </div>
        <h1>
          Быстрое воспроизведение&nbsp;
          <input type="button" onclick="editInstantStation()" value="Добавить и править">
        </h1>
        <div class="section">
          <p> <span class="bold1">Полный URL: </span>
            <input type="text" id="instant_URL" name="URL" onkeyup="parseURL()" onmouseup="parseEditURL()">
            <br>
            <span class="bold1">Короткий URL: </span>
            <input type="text" id="instant_url" name="url" onkeyup="buildURL()">
            <br>
            <span class="bold1">Порт: </span>
            <input type="text" id="instant_port" name="port" value="80" onkeyup="buildURL()">
            <br>
            <span class="bold1">Путь: </span>
            <input type="text" id="instant_path" name="path" value="/" onkeyup="buildURL()">
          </p>
          <br>
          <div class="icons">
            <div class="icons8" title="Быстрое воспроизведение станции" onclick="instantPlay()">
              <i class="icono-play"></i>
            </div>
            <div class="icons8" title="Остановить быстрое воспроизведение станции" onclick="stopStation()">
              <i class="icono-stop"></i>
            </div>
          </div>
          <!-- <input type="button" value=Play onClick="instantPlay()">&nbsp; <input type="button" value="Стоп" onClick="stopStation()"> -->
          <br>
        </div>
        <h1>Мониторинг</h1>
        <div class="section">
          <div class="icons">
            <div class="icons8" title="Запуск мониторинга" onclick="mplay()">
              <i class="icono-play"></i>
            </div>
            <div class="icons8" title="Остановка мониторинга" onclick="mstop()">
              <i class="icono-stop"></i>
            </div>
            <!-- <input type="button" value=Play onClick="mplay()"> &nbsp; <input type="button" value="Стоп" onClick="mstop()"></p> -->
          </div><br>
          <table>
            <tbody>
              <tr>
                <td>Громкость</td>
              </tr>
              <tr>
                <td><input id="volm_range" max="100" min="0" name="volm" oninput="mvol(this.value/100)"
                    style="height:25px;" type="range"></td>
              </tr>
            </tbody>
          </table>
          <audio id="audio" src="/" class="audio_sound" onerror="monerror()">
            Мне жаль; ваш браузер не поддерживает HTML5 <code>audio</code>.
          </audio>

        </div>
        <h1>
          Режим сна / Пробуждение&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="time">time</span>
        </h1>
        <div class="section">
          <p id="sw1">
            <span class="bold1" title="Режим времени: ЧЧ:ММ или Режим задержки (минуты): ММ">ВЫКЛ :
            </span>
            <input type="text" id="sleepdelay" onkeyup="sleepup(event)">
            <input type="button" value="Старт" onclick="startSleep()">
            <input type="button" value="Стоп" onclick="stopSleep()">&nbsp;Через: <span id="sminutes">0</span> сек.
          </p>
          <p id="sw2">
            <span class="bold1" title="Режим времени: ЧЧ:ММ или Режим задержки (минуты): ММ">ВКЛ :
            </span>
            <input type="text" id="wakedelay" onkeyup="wakeup(event)">
            <input type="button" value="Старт" onclick="startWake()">
            <input type="button" value="Стоп" onclick="stopWake()">&nbsp;Через: <span id="wminutes">0</span> сек.
          </p>
          <br>
        </div>

      </div>
      <!-- END PLAY РАДИО -->
      <div>
        <!-- СТАНЦИИ -->
        <h1>Менеджер станций</h1>
        <div class="section">
          <p>
            <input type="button" onclick="saveTextAsFile()" value="Сохранить станции из Радиолы">
            <span style="display:inline-block;"> &nbsp;&nbsp;в &nbsp;&nbsp;&nbsp;<input type="text"
                style="width:300px;color:black;" value="RadiolaStations.txt" id="filesave"> </span>
            <br>
            <br>
            <input type="button" onclick="downloadStations()" value="Загрузить станции в Радиолу">
            <span style="display:inline-block;"> &nbsp;&nbsp;из &nbsp;&nbsp;&nbsp;<input type="file"
                style="width:300px;color:black;" id="fileload"> </span> <br><br>
            <input type="button" id="refresh" title="Это перезагрузит станции в Радиоле" onclick="refreshList()"
              value="Обновить локальный список"> <input type="button" id="stsave" disabled=""
              title="Это сохранит все станции в Радиоле" onclick="stChanged()" value="Сохранить список"> <input
              type="button" id="clear" title="Предупреждение: Это удалит все станции. Обязательно сохраните их раньше."
              onclick="clearList()" value="Удалить всё"> <input type="button" id="print"
              title="Печать всего списка станций на принтере" onclick="printList()" value="Печатать всё">
          </p>
          <br>
          <p>Вы можете перетаскивать любую строку, чтобы отсортировать список</p>
          <table id="stationsTable" style="table-layout: fixed; width: 100%;">
            <thead>
              <tr>
                <td style="width:5%;text-align: center; vertical-align: middle;">№</td>
                <td style="width:38%; ">Имя</td>
                <td style="width:45%; ">URL</td>
                <td style="width:9%;text-align: center; vertical-align: middle;">Правка</td>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <!-- END СТАНЦИИ -->
      <div>
        <!-- ЗВУК -->
        <div data-tabs>
          <div onclick="tabbis.onClick(1,0);hardware(1)" class="active">КОМП</div>
          <div onclick="tabbis.onClick(1,1);hardware(1)">РАДИО</div>
          <div onclick="tabbis.onClick(1,2);hardware(1)">БЛЮТУЗ</div>
        </div>
        <br>
        <div id="barTDA7313" style="display: block;">
          <h1>TDA7313</h1>
          <div class="section">
            <div class="bold2">ЗВУК
              <div class="OffOn">
                <input type="checkbox" id="mute" onclick="mute(1)" class="OffOn">
                <label for="mute"></label>
              </div>
            </div>
            <br>
            <table>
              <tbody>
                <tr>
                  <td>Громкость:</td>
                  <td id="Volume_span">0 дБ</td>
                </tr>
                <tr>
                  <td colspan="2" style="text-align: center;"><input id="Volume_range" max="17" min="0" name="Volume"
                      oninput="onTDAchange('Volume')" style="height:25px;" type="range"></td>
                </tr>
                <tr>
                  <td>Низкие частоты:</td>
                  <td id="Bass_span">0 дБ</td>
                </tr>
                <tr>
                  <td colspan="2" style="text-align: center;"><input id="Bass_range" max="14" min="0" name="Bass"
                      oninput="onTDAchange('Bass')" style="height:25px;" type="range"></td>
                </tr>
                <tr>
                  <td>Высокие частоты:</td>
                  <td id="Treble_span">0 дБ</td>
                </tr>
                <tr>
                  <td colspan="2" style="text-align: center;"><input id="Treble_range" max="14" min="0" name="Treble"
                      oninput="onTDAchange('Treble')" style="height:25px;" type="range"></td>
                </tr>
              </tbody>
            </table>
            <br>
            <span class="bold">ПЕРЕДНИЕ ДИНАМИКИ:</span>
            <table id="Front">
              <tbody>
                <tr>
                  <td>Левый канал:</td>
                  <td id="AttLF_span">0 дБ</td>
                  <td>Правый канал:</td>
                  <td id="AttRF_span">0 дБ</td>
                </tr>
                <tr>
                  <td colspan="2" rowspan="1" style="text-align: center"><input type="range" id="AttLF_range" max="13"
                      min="0" name="AttLF" oninput="onTDAchange('AttLF')"></td>
                  <td colspan="2" rowspan="1" style="text-align: center"><input id="AttRF_range" type="range" max="13"
                      min="0" name="AttRF" oninput="onTDAchange('AttRF')"></td>
                </tr>
              </tbody>
            </table>
            <br>
            <div class="bold2">ЗАДНИЕ ДИНАМИКИ
              <div class="OffOn">
                <input type="checkbox" id="rearON" onclick="clickrear()" class="OffOn">
                <label for="rearON"></label>
              </div>
            </div>
            <table id="Rear">
              <tbody>
                <tr>
                  <td>Левый канал:</td>
                  <td id="AttLR_span">0 дБ</td>
                  <td>Правый канал:</td>
                  <td id="AttRR_span">0 дБ</td>
                </tr>
                <tr>
                  <td colspan="2" rowspan="1" style="text-align: center"><input type="range" id="AttLR_range" max="13"
                      min="0" name="AttLR" oninput="onTDAchange('AttLR')"></td>
                  <td colspan="2" rowspan="1" style="text-align: center"><input type="range" id="AttRR_range" max="13"
                      min="0" name="AttRR" oninput="onTDAchange('AttRR')"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div data-panes>
          <div id="audioinput1" style="border: none;" class="active">
            <!-- КОМП -->
            <h1>ТОНКОМПЕНСАЦИЯ</h1>
            <div class="section">
              <div class="bold2">ТОНКОМПЕНСАЦИЯ
                <div class="OffOn">
                  <input type="checkbox" id="loud1" onclick="clickloud()" class="OffOn">
                  <label for="loud1"></label>
                </div>
              </div>
            </div>
            <h1>ПРЕДУСИЛЕНИЕ</h1>
            <div class="section">
              <table>
                <tbody>
                  <tr>
                    <td>ПРЕДУСИЛЕНИЕ:</td>
                    <td id="sla1_span">0 дБ</td>
                  </tr>
                  <tr>
                    <td colspan="2"><input id="sla1_range" max="3" min="0" name="SLA1" oninput="onTDAchange('sla1')"
                        type="range"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- END КОМП -->
          <div id="audioinput2" style="border: none;">
            <!-- РАДИО -->
            <div id="barTDA7313radio" style="display: block;">
              <h1>ТОНКОМПЕНСАЦИЯ</h1>
              <div class="section">
                <div class="bold2">ТОНКОМПЕНСАЦИЯ
                  <div class="OffOn">
                    <input type="checkbox" id="loud2" onclick="clickloud()" class="OffOn">
                    <label for="loud2"></label>
                  </div>
                </div>
              </div>
              <h1>ПРЕДУСИЛЕНИЕ</h1>
              <div class="section">
                <table>
                  <tbody>
                    <tr>
                      <td>ПРЕДУСИЛЕНИЕ:</td>
                      <td id="sla2_span">0 дБ</td>
                    </tr>
                    <tr>
                      <td colspan="2"><input id="sla2_range" max="3" min="0" name="SLA2" oninput="onTDAchange('sla2')"
                          type="range"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <h1>VS1053</h1>
            <div class="section">
              <table id="VS1053">
                <tbody>
                  <tr>
                    <td>Громкость:</td>
                    <td id="vol_span"></td>
                  </tr>
                  <tr>
                    <td colspan="2" style="text-align: center"><input id="vol_range" max="254" min="0" name="vol"
                        oninput="onRangeVolChange(this.value,true)" type="range" value="100"></td>
                  </tr>
                  <tr>
                    <td>Уровень ВЧ:</td>
                    <td id="treble_span"></td>
                  </tr>
                  <tr>
                    <td colspan="2" style="text-align: center"><input id="treble_range" max="7" min="-8" name="treble"
                        oninput="onRangeChange('treble_range', 'treble_span', 1.5, false)" type="range"></td>
                  </tr>
                  <tr>
                    <td>Частота ВЧ:</td>
                    <td id="treblefreq_span"></td>
                  </tr>
                  <tr>
                    <td colspan="2" style="text-align: center"><input id="treblefreq_range" max="15" min="1"
                        name="treblefreq"
                        oninput="onRangeChangeFreqTreble('treblefreq_range', 'treblefreq_span', 1, false)" type="range">
                    </td>
                  </tr>
                  <tr>
                    <td>Уровень НЧ:</td>
                    <td id="bass_span"></td>
                  </tr>
                  <tr>
                    <td colspan="2" style="text-align: center"><input id="bass_range" max="15" min="0" name="bass"
                        oninput="onRangeChange('bass_range', 'bass_span', 1, false)" type="range"></td>
                  </tr>
                  <tr>
                    <td>Частота НЧ:</td>
                    <td id="bassfreq_span"></td>
                  </tr>
                  <tr>
                    <td colspan="2" style="text-align: center"><input id="bassfreq_range" max="15" min="2"
                        name="bassfreq" oninput="onRangeChangeFreqBass('bassfreq_range', 'bassfreq_span', 10, false)"
                        type="range"></td>
                  </tr>
                  <tr>
                    <td>Объёмный звук:</td>
                    <td id="spacial_span"></td>
                  </tr>
                  <tr>
                    <td colspan="2" style="text-align: center"><input id="spacial_range" max="3" min="0" name="spacial"
                        oninput="onRangeChangeSpatial('spacial_range', 'spacial_span')" type="range"></td>
                  </tr>
                  <tr>
                    <td class="bold" colspan="2" style="text-align: center"><input onclick="resetEQ()" type="button"
                        value="Сброс"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- END РАДИО -->
          <div id="audioinput3" style="border: none;">
            <!-- БЛЮТУЗ -->
            <h1>ТОНКОМПЕНСАЦИЯ</h1>
            <div class="section">
              <div class="bold2">ТОНКОМПЕНСАЦИЯ
                <div class="OffOn">
                  <input type="checkbox" id="loud3" onclick="clickloud()" class="OffOn">
                  <label for="loud3"></label>
                </div>
              </div>
            </div>
            <h1>ПРЕДУСИЛЕНИЕ</h1>
            <div class="section">
              <table>
                <tbody>
                  <tr>
                    <td>ПРЕДУСИЛЕНИЕ:</td>
                    <td id="sla3_span">0 дБ</td>
                  </tr>
                  <tr>
                    <td colspan="2"><input id="sla3_range" max="3" min="0" name="SLA3" oninput="onTDAchange('sla3')"
                        type="range"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- END БЛЮТУЗ -->
        </div>
      </div>
      <!-- END ЗВУК -->
      <div>
        <!-- НАСТРОЙКИ -->
        <div data-tabs>
          <div id="WIFI" class="active">WIFI</div>
          <div id="GPIOS">GPIOS</div>
          <div id="REMOTE">ПУЛЬТ</div>
          <div id="OPTIONS">ОПЦИИ</div>
          <div id="UPDATE">UPDATE</div>
        </div>
        <div data-panes>
          <div class="active">
            <!-- СЕТЬ WI-FI -->
            <h1>
              Wifi и Сеть <input type="button" value="Сохранить" onclick="valid()">
            </h1>
            <div class="section">
              <table>
                <tbody>
                  <tr>
                    <td>SSID</td>
                    <td>1: <input id="ssid" type="text"></td>
                    <td>2: <input id="ssid2" type="text"></td>
                  </tr>
                  <tr>
                    <td>ПАРОЛЬ</td>
                    <td>1: <input id="passwd" type="password"></td>
                    <td>2: <input id="passwd2" type="password"></td>
                  </tr>
                  <tr>
                    <td>DHCP</td>
                    <td>1: <div class="bold2">
                        <div class="OffOn" style="top: 4px;">
                          <input id="dhcp" onclick="clickdhcp()" type="checkbox" class="OffOn">
                          <label for="dhcp"></label></div>
                      </div>
                    </td>
                    <td>2: <div class="bold2">
                        <div class="OffOn" style="top: 4px;">
                          <input id="dhcp2" onclick="clickdhcp()" type="checkbox" class="OffOn">
                          <label for="dhcp2"></label></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>АДРЕС</td>
                    <td>1: <input id="ip" oninput="chkip(this)" type="text"></td>
                    <td>2: <input id="ip2" oninput="chkip(this)" type="text"></td>
                  </tr>
                  <tr>
                    <td>МАСКА</td>
                    <td>1: <input id="mask" oninput="chkip(this)" type="text" value="255.255.255.0"></td>
                    <td>2: <input id="mask2" oninput="chkip(this)" type="text" value="255.255.255.0"></td>
                  </tr>
                  <tr>
                    <td>ШЛЮЗ</td>
                    <td>1: <input id="gw" oninput="chkip(this)" type="text"></td>
                    <td>2: <input id="gw2" oninput="chkip(this)" type="text"></td>
                  </tr>
                  <tr>
                    <td>USER AGENT</td>
                    <td colspan="2" rowspan="1">&nbsp;&nbsp;&nbsp;&nbsp;<input id="ua" type="text" value=""></td>
                  </tr>
                  <tr>
                    <td>ИМЯ ХОСТА MDNS</td>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;<input id="host" type="text" value=""></td>
                    <td>.local</td>
                  </tr>
                  <tr>
                    <td>MAC АДРЕС</td>
                    <td colspan="2" id="Mac" rowspan="1"></td>
                  </tr>
                </tbody>
              </table>
              <br>
            </div>
          </div>
          <!-- END СЕТЬ WI-FI -->
          <div>
            <!-- GPIOS -->
            <h1>GPIOS &nbsp;<input type="button" value="Считать значения по-умолчанию" onclick="gpios(0,0,0)">
              <input type="button" value="Считать значения из NVS" onclick="gpios(1,0,0)">
              <input type="button" value="Сохранить значения в NVS" onclick="gpios(1,1,0)">
            </h1>
            <div class="section">
              <table id="GPIOsState">
                <tbody>
                  <tr>
                    <td colspan="2" rowspan="1">СТАТУС</td>
                    <td id="GPIOsErr"></td>
                  </tr>
                </tbody>
              </table>
              <table id="GPIOsTable">
                <thead>
                  <tr>
                    <td>ИМЯ GPIO</td>
                    <td>ЗНАЧЕНИЕ</td>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>SPI</td>
                    <td contenteditable="true" id="K_SPI"></td>
                  </tr>
                  <tr>
                    <td>MISO</td>
                    <td contenteditable="true" id="P_MISO"></td>
                  </tr>
                  <tr>
                    <td>MOSI</td>
                    <td contenteditable="true" id="P_MOSI"></td>
                  </tr>
                  <tr>
                    <td>CLK</td>
                    <td contenteditable="true" id="P_CLK"></td>
                  </tr>
                  <tr>
                    <td>XCS</td>
                    <td contenteditable="true" id="P_XCS"></td>
                  </tr>
                  <tr>
                    <td>XDCS</td>
                    <td contenteditable="true" id="P_XDCS"></td>
                  </tr>
                  <tr>
                    <td>DREQ</td>
                    <td contenteditable="true" id="P_DREQ"></td>
                  </tr>
                  <tr>
                    <td>ENC0_A</td>
                    <td contenteditable="true" id="P_ENC0_A"></td>
                  </tr>
                  <tr>
                    <td>ENC0_B</td>
                    <td contenteditable="true" id="P_ENC0_B"></td>
                  </tr>
                  <tr>
                    <td>ENC0_BTN</td>
                    <td contenteditable="true" id="P_ENC0_BTN"></td>
                  </tr>
                  <tr>
                    <td>I2C_SCL</td>
                    <td contenteditable="true" id="P_I2C_SCL"></td>
                  </tr>
                  <tr>
                    <td>I2C_SDA</td>
                    <td contenteditable="true" id="P_I2C_SDA"></td>
                  </tr>
                  <tr>
                    <td>LCD_CS</td>
                    <td contenteditable="true" id="P_LCD_CS"></td>
                  </tr>
                  <tr>
                    <td>LCD_A0</td>
                    <td contenteditable="true" id="P_LCD_A0"></td>
                  </tr>
                  <tr>
                    <td>IR_SIGNAL</td>
                    <td contenteditable="true" id="P_IR_SIGNAL"></td>
                  </tr>
                  <tr>
                    <td>BACKLIGHT</td>
                    <td contenteditable="true" id="P_BACKLIGHT"></td>
                  </tr>
                  <tr>
                    <td>TACHOMETER</td>
                    <td contenteditable="true" id="P_TACHOMETER"></td>
                  </tr>
                  <tr>
                    <td>FAN_SPEED</td>
                    <td contenteditable="true" id="P_FAN_SPEED"></td>
                  </tr>
                  <tr>
                    <td>DS18B20</td>
                    <td contenteditable="true" id="P_DS18B20"></td>
                  </tr>
                  <tr>
                    <td>TOUCH_CS</td>
                    <td contenteditable="true" id="P_TOUCH_CS"></td>
                  </tr>
                  <tr>
                    <td>BUZZER</td>
                    <td contenteditable="true" id="P_BUZZER"></td>
                  </tr>
                  <tr>
                    <td>RXD</td>
                    <td contenteditable="true" id="P_RXD"></td>
                  </tr>
                  <tr>
                    <td>TXD</td>
                    <td contenteditable="true" id="P_TXD"></td>
                  </tr>
                  <tr>
                    <td>LDR</td>
                    <td contenteditable="true" id="P_LDR"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- END GPIOS -->
          <div>
            <!-- ИК-ПУЛЬТ -->
            <h1>КОДЫ ИК-ПУЛЬТА <input type="button" value="Считать значения по-умолчанию" onclick="ircodes(0,0,0)">
              <input type="button" value="Считать значения из NVS" onclick="ircodes(1,0,0)"><input type="button"
                value="Сохранить значения в NVS" onclick="ircodes(1,1,0)">
            </h1>
            <div class="section">
              <table id="IRcodesState">
                <tbody>
                  <tr>
                    <td colspan="2" rowspan="1">СТАТУС</td>
                    <td id="IrErr"></td>
                  </tr>
                </tbody>
              </table>
              <table id="IRcodesTable">
                <thead>
                  <tr>
                    <td>КОМАНДА</td>
                    <td>КНОПКА</td>
                    <td>КОД</td>
                    <td>ОБУЧЕНИЕ</td>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Станция +</td>
                    <td id="CALL_0">ВВЕРХ</td>
                    <td id="K_0"></td>
                    <td><input onclick="training('UP',0)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Громкость -</td>
                    <td id="CALL_1">ВЛЕВО</td>
                    <td id="K_1"></td>
                    <td><input onclick="training('LEFT',1)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Старт/Стоп</td>
                    <td id="CALL_2">ОК</td>
                    <td id="K_2"></td>
                    <td><input onclick="training('OK',2)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Громкость +</td>
                    <td id="CALL_3">ВПРАВО</td>
                    <td id="K_3"></td>
                    <td><input onclick="training('RIGHT',3)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция -</td>
                    <td id="CALL_4">ВНИЗ</td>
                    <td id="K_4"></td>
                    <td><input onclick="training('DOWN',4)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 0</td>
                    <td id="CALL_5">0</td>
                    <td id="K_5"></td>
                    <td><input onclick="training('0',5)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 1</td>
                    <td id="CALL_6">1</td>
                    <td id="K_6"></td>
                    <td><input onclick="training('1',6)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 2</td>
                    <td id="CALL_7">2</td>
                    <td id="K_7"></td>
                    <td><input onclick="training('2',7)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 3</td>
                    <td id="CALL_8">3</td>
                    <td id="K_8"></td>
                    <td><input onclick="training('3',8)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 4</td>
                    <td id="CALL_9">4</td>
                    <td id="K_9"></td>
                    <td><input onclick="training('4',9)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 5</td>
                    <td id="CALL_10">5</td>
                    <td id="K_10"></td>
                    <td><input onclick="training('5',10)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 6</td>
                    <td id="CALL_11">6</td>
                    <td id="K_11"></td>
                    <td><input onclick="training('6',11)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 7</td>
                    <td id="CALL_12">7</td>
                    <td id="K_12"></td>
                    <td><input onclick="training('7',12)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 8</td>
                    <td id="CALL_13">8</td>
                    <td id="K_13"></td>
                    <td><input onclick="training('8',13)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Станция № 9</td>
                    <td id="CALL_14">9</td>
                    <td id="K_14"></td>
                    <td><input onclick="training('9',14)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Источник звука</td>
                    <td id="CALL_15">*</td>
                    <td id="K_15"></td>
                    <td><input onclick="training('STAR',15)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                  <tr>
                    <td>Часы</td>
                    <td id="CALL_16">#</td>
                    <td id="K_16"></td>
                    <td><input onclick="training('DIESE',16)" type="button" value="ОБУЧИТЬ"></td>
                  </tr>
                </tbody>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>
          <!-- END ИК-ПУЛЬТ -->
          <div>
            <!-- ОПЦИИ -->
            <h1>ОПЦИИ
              <input type="button" onclick="devoptions(0)" value="Обновить"><input type="button" onclick="devoptions(1)"
                value="Сохранить"></h1>
            <div class="section">
              <table id="OptionsTable">
                <tbody>
                  <tr>
                    <td>Логи CMD-Консоли</td>
                    <td><select id="O_ESPLOG">
                        <option value="0">Выключить</option>
                        <option value="1">Ошибки</option>
                        <option value="2">Предупреждения</option>
                        <option value="3">Информация</option>
                        <option value="4">Отладка</option>
                        <option value="5">Подробно</option>
                      </select></td>
                  </tr>
                  <tr>
                    <td>Сервера точного времени</td>
                    <td><select id="O_NTP" onclick="NTPservers()">
                        <option value="0">по-умолчанию</option>
                        <option value="1">свои</option>
                      </select></td>
                  </tr>
                  <tr id="custom_NTP">
                    <td>Сервера пользователя</td>
                    <td>
                      <p><b>0:</b> <input id="O_NTP0" type="text"></p>
                      <p><b>1:</b> <input id="O_NTP1" type="text"></p>
                      <p><b>2:</b> <input id="O_NTP2" type="text"></p>
                      <p><b>3:</b> <input id="O_NTP3" type="text"></p>
                    </td>
                  </tr>
                  <tr>
                    <td>Часовой пояс</td>
                    <td><select id="O_TZONE" onclick="TimeZone()">
                        <option value="EET-2EEST,M3.5.0/3,M10.5.0/4">Киев, София</option>
                        <option value="EET-2">Калинингад</option>
                        <option value="MSK-3">Москва</option>
                        <option value="SAMT-4">Самара</option>
                        <option value="YEKT-5">Екатеринбург</option>
                        <option value="OMST-6">Омск</option>
                        <option value="KRAT-7">Красноярск</option>
                        <option value="IRKT-8">Иркутск</option>
                        <option value="YAKT-9">Чита</option>
                        <option value="VLAT-10">Владивосток</option>
                        <option value="SAKT-11">Южно-Сахалинск</option>
                        <option value="PETT-12">Петропавловск-Камчатский</option>
                        <!-- <option value="CUSTOMTZ">Своя зона</option> -->
                      </select></td>
                  </tr>
                  <tr id="edit_TZ">
                    <td colspan="2">Зона пользователя<input id="custom_TZ" style="margin-left: 67px;" type="text"></td>
                  </tr>
                  <tr>
                    <td>Формат вывода даты</td>
                    <td><select id="O_TIME_FORMAT">
                        <option value="0">ММ:ДД</option>
                        <option value="1">ДД:ММ</option>
                      </select></td>
                  </tr>
                  <tr>
                    <td>Поворот дисплея</td>
                    <td><select id="O_LCD_ROTA">
                        <option value="0">НЕТ</option>
                        <option value="1">ДА</option>
                      </select></td>
                  </tr>
                  <tr>
                    <td>Яркость дисплея</td>
                    <td><select id="O_LCD_BRG" onclick="displaybright()">
                        <option value="0">Не регулировать</option>
                        <option value="1">автоматически по времени</option>
                        <option value="2">автоматически от освещения</option>
                        <option value="3">вручную</option>
                      </select></td>
                  </tr>
                </tbody>
              </table>
              <div id="brightOn">
                <table id="bright">
                  <tbody>
                    <tr id="by_time">
                      <td>ЗАТЕМНЕНИЕ</td>
                      <td>С:</td>
                      <td><select name="begin_h">
                          <option value="0">00</option>
                          <option value="1">01</option>
                          <option value="2">02</option>
                          <option value="3">03</option>
                          <option value="4">04</option>
                          <option value="5">05</option>
                          <option value="6">06</option>
                          <option value="7">07</option>
                          <option value="8">08</option>
                          <option value="9">09</option>
                          <option value="10">10</option>
                          <option value="11">11</option>
                          <option value="12">12</option>
                          <option value="13">13</option>
                          <option value="14">14</option>
                          <option value="15">15</option>
                          <option value="16">16</option>
                          <option value="17">17</option>
                          <option value="18">18</option>
                          <option value="19">19</option>
                          <option value="20">20</option>
                          <option value="21">21</option>
                          <option value="22">22</option>
                          <option value="23">23</option>
                        </select>&nbsp; :&nbsp;&nbsp;<select name="begin_m">
                          <option value="0">00</option>
                          <option value="15">15</option>
                          <option value="30">30</option>
                          <option value="45">45</option>
                        </select></td>
                      <td>ДО:</td>
                      <td><select name="end_h">
                          <option value="0">00</option>
                          <option value="1">01</option>
                          <option value="2">02</option>
                          <option value="3">03</option>
                          <option value="4">04</option>
                          <option value="5">05</option>
                          <option value="6">06</option>
                          <option value="7">07</option>
                          <option value="8">08</option>
                          <option value="9">09</option>
                          <option value="10">10</option>
                          <option value="11">11</option>
                          <option value="12">12</option>
                          <option value="13">13</option>
                          <option value="14">14</option>
                          <option value="15">15</option>
                          <option value="16">16</option>
                          <option value="17">17</option>
                          <option value="18">18</option>
                          <option value="19">19</option>
                          <option value="20">20</option>
                          <option value="21">21</option>
                          <option value="22">22</option>
                          <option value="23">23</option>
                        </select>&nbsp; :&nbsp;&nbsp;<select name="end_m">
                          <option value="0">00</option>
                          <option value="15">15</option>
                          <option value="30">30</option>
                          <option value="45">45</option>
                        </select></td>
                    </tr>
                    <tr id="brightness">
                      <td>ЯРКОСТЬ</td>
                      <td>ДЕНЬ</td>
                      <td><input id="day_brightness" max="254" min="0" name="day_brightness" type="range" value="127">
                      </td>
                      <td>НОЧЬ</td>
                      <td><input id="night_brightness" max="254" min="0" name="night_brightness" type="range"
                          value="127"></td>
                    </tr>
                    <tr id="by_lighting">
                      <td>ПОРОГ</td>
                      <td style=" text-align: center;" colspan="4" rowspan="1"><input id="brightness_trigger" max="1023"
                          min="0" name="brightness_trigger" type="range" value="127"></td>
                    </tr>
                    <tr id="by_hand">
                      <td>ЯРКОСТЬ</td>
                      <td style=" text-align: center;" colspan="4" rowspan="1"><input id="hand_brightness" max="254"
                          min="0" name="hand_brightness" type="range" value="127"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <table id="FanControlTable">
                <tbody>
                  <tr>
                    <td>Регулировка оборотов</td>
                    <td><select id="FanControl" onclick="FanControl()">
                        <option value="0">Не регулировать</option>
                        <option value="1">Автоматическая</option>
                        <option value="2">Ручная</option>
                      </select></td>
                  </tr>
                  <tr id="not_control">
                    <td colspan="2">
                      <div id="by_auto">
                        <div>Температура срабатывания</div>
                        <div>Min:&nbsp; &nbsp;<select name="min_temp">
                            <option value="40">40</option>
                            <option value="45">45</option>
                            <option value="50">50</option>
                            <option value="55">55</option>
                            <option value="60">60</option>
                            <option value="65">65</option>
                            <option value="70">70</option>
                          </select>&nbsp;℃&nbsp; &nbsp;Max:&nbsp;
                          <select name="max_temp">
                            <option value="75">75</option>
                            <option value="80">80</option>
                            <option value="85">85</option>
                            <option value="90">90</option>
                            <option value="95">95</option>
                            <option value="100">100</option>
                            <option value="105">105</option>
                          </select>&nbsp;℃</div><br>
                        <div>Минимальные обороты</div>
                        <div><input id="min_pwm" max="255" min="0" name="min_pwm" type="range" value="127">
                        </div>
                      </div>
                      <div id="by_handpwm"><br>
                        <div>Обороты</div><br>
                        <input id="hand_pwm" max="255" min="0" name="hand_pwm" type="range" value="127">
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <h1>ЗАГРУЗКА\СОХРАНЕНИЕ НАСТРОЕК
              <input type="button" value="Загрузить настройки из файла" onclick="loadCSV()">
              <input type="button" value="Сохранить настройки в файл" onclick="saveCSV()"></h1>
            <div class="section">
              <table id="CSVname">
                <tbody>
                  <tr>
                    <td>ИМЯ ФАЙЛА</td>
                    <td contenteditable="true" id="L_LABEL">new_psram.csv</td>
                  </tr>
                  <tr>
                    <td>ОПИСАНИЕ</td>
                    <td contenteditable="true" id="L_COMMENT">Это стандартная конфигурация для
                      ESP32-WROVER.
                    </td>
                  </tr>
                </tbody>
              </table>
              <br>
            </div>
            <h1>ДРУГОЕ</h1>
            <div class="section">
              <p></p>
              <div class="bold2">WEB-КОНСОЛЬ:
                <div class="OffOn">
                  <input id="consON" type="checkbox" onclick="consoleON()" class="OffOn">
                  <label for="consON"></label></div>
              </div>
              <p></p>
            </div>
          </div>
          <!-- END ОПЦИИ -->
          <div>
            <!-- ОБНОВЛЕНИЯ -->
            <h1>
              Текущая версия: <span id="currentrelease">1.0 Rev: Beta 9</span>&nbsp;Обновить до:
              <span id="newrelease">1.0 Rev: Beta 10</span>
              <input type="button" value="Обновить сейчас" onclick="upgrade()">
              &nbsp;
              <span id="updatefb"></span>
              <br>
            </h1>
            <div class="section">
              <p>
                <span class="bold4" id="Version"></span>
                <br>
                <span class="bold4">Чтобы обновить или перезагрузить текущий релиз:</span>
                <br>
                <br>
                <input type="button" value="Обновить сейчас" onclick="upgrade()">
                <br>
                <span class="bold4" id="Infos"></span>
                <br>
              </p>
            </div>
            <h1>История:</h1>
            <div class="section">
              <input type="button" value="Загрузить" onclick="checkhistory()">
              <br>
              <span class="bold4" id="History"></span>
              <br>
            </div>
          </div>
          <!-- END ОБНОВЛЕНИЯ -->
        </div>
        <br>
      </div>
      <!-- END НАСТРОЙКИ -->
    </div>
    <div id="footer"><a href="https://github.com/SinglWolf/ESP32-Radiola" target="_blank">РАДИОЛА by SinglWolf © 2020
        Все права защищены.</a>
    </div>

  </div>
  <script src="tabbis.js"></script>
  <script>
    localStorage.removeItem("tabbis");
    // var tabs = tabbis.init({
    //   tabGroup: "[data-tabs]",
    //   paneGroup: "[data-panes]",
    //   tabActive: "active",
    //   paneActive: "active",
    //   callback: function (tab, pane) {
    //     console.log(tab);
    //     console.log(pane);
    //   }
    // });
    tabbis.init();

  </script>

</body>


</html>