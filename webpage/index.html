<!DOCTYPE html>
<html lang="ru" xml:lang="ru" xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <meta http-equiv=Content-Type content="text/html;charset=UTF-8">
    <meta name=viewport content="width=device-width, minimum-scale=0.25,initial-scale=1.0" />
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=apple-mobile-web-app-status-bar-style content=default>
    <link rel=apple-touch-icon type="image/png" href=logo.png>
    <link rel=icon type="image/png" href=favicon.png />
    <link rel=stylesheet title=base href=style.css type="text/css" />
    <style></style>
    <script src=script.js></script>
    <title>РАДИОЛА</title>
  </head>

  <body>
    <div id=HEADER onclick="ScrollUp();return!1;">
      <div class=LEFT>
        <img title="Нажмите на логотип, чтобы изменить тему" onClick="theme()" src=logo.png>
      </div>
      <div class=RIGHT>
        <br>
        <br>
        <br>
        <br>
        <div id=rssi>0 дБм</div>
        <div id=curtemp>0 ℃</div>
        <div id=rpmfan>0 Об/мин</div>
        <br>
      </div>
      <div id=HEAD>
        <span class=bold4>
          <span id=meta>Радиола</span>
        </span>
      </div>
    </div>
    <div id=MAIN>
      <!-- The Modal Edit window-->
      <div id=editStationDiv class=modal>
        <div class=modal-content>
          <h1>Редактирование станции</h1>
          <div class="section modal-body">
            <p>
              <span class="bold">Номер слота: </span>
              <input type="text" id="add_slot" disabled name="slot">
              <br>
              <span class="bold">Имя: </span>
              <input type="text" style="width:350px;" id=add_name name=name>
              <br>
              <span class="bold">Полный URL: </span>
              <input type="text" style="width:350px;" id=add_URL name=URL onkeyup="parseEditURL()" onmouseup="parseEditURL()">
              <br>или<br>
              <span class="bold">URL: </span>
              <input type="text" id=add_url name=url onkeyup="buildAddURL()">
              <br>
              <span class="bold">Порт: </span>
              <input type="text" id=add_port name=port value=80 onkeyup="buildAddURL()">
              <br>
              <span class="bold">Путь: </span>
              <input type="text" id=add_path name=path value="/" onkeyup="buildAddURL()">
              <br>
              <span class="bold">Смещение громкости: </span>
              <input type=range id=ovol name=ovol step=2 min=-126 max=126>
              <br>
              <br>
              <input type="button" onClick="saveStation()" value="сохранить"> &nbsp;
              <input type="button" onClick="eraseStation()" value="стереть"> &nbsp;
              <input type="button" onClick="abortStation()" value="выйти">
            </p>
            <br>
          </div>
        </div>
      </div>
      <div id="editIrKeyDiv" class="modal">
        <div class=modal-content>
          <h1>Обучение кнопки пульта</h1>
          <div class="section modal-body">
            <p>
              <span class="bold">Название кнопки: </span>
              <input type="text" id="key_name" disabled name="key">
              <br>
              <span class="bold">Текущий код: </span>
              <input type="text" style="width:350px;" id="current_key" name="current_key">
              <br>
              <span class="bold">Новый код: </span>
              <input type="text" style="width:350px;" id="new_key" name="new_key">
              <br>
              <br>
              <input type="button" onClick="saveIrKey()" value="сохранить"> &nbsp;
              <input type="button" onClick="eraseIrKey()" value="стереть"> &nbsp;
              <input type="button" onClick="abortIrKey()" value="выйти">
            </p>
            <br>
          </div>
        </div>
      </div>
      <!-- The END Modal Edit window-->
      <div data-tabs>
        <div id="PLAYER" class="active">РАДИО</div>
        <div id="STATIONS">СТАНЦИИ</div>
        <div id="SOUND">ЗВУК</div>
        <div id="SETTINGS">НАСТРОЙКИ</div>
      </div>
      <div data-panes>
        <div class="active">
          <!-- PLAY РАДИО -->
          <H1>Управление станциями</H1>
          <div class="section">
            <div class=bold2>Автовоспроизведение
              <div class="OffOn">
                <input type="checkbox" id="aplay" onclick="autoplay()" class="OffOn">
                <label for="aplay"></label>
              </div>
            </div>
            <p>
              <select id=stationsSelect onchange="Select()"></select>
            </p>
            <!-- <span id=np> -->
            <div class="icons">
              <div class="icons8" title="Предыдущая станция" onclick="prevStation()">
                <i class="icono-previous"></i>
              </div>
              <div class="icons8" title="Воспроизведение станции" onclick="playStation()">
                <i class="icono-play"></i>
              </div>
              <div class="icons8" title="Остановить воспроизведение" onclick="stopStation()">
                <i class="icono-stop"></i>
              </div>
              <div class="icons8" title="Следующая станция" onclick="nextStation()">
                <i class="icono-next"></i></div>
              <br>
            </div>
            <!-- </span> -->
            <br>
            <p>
              <span class=bold2>Громкость: </span> &nbsp;&nbsp;
              <span id=vol1_span></span>
              <br>
              <input type=range id=vol1_range name=vol1 onChange="onRangeVolChange(this.value,true)" min=0 max=254 style="height:25px;">
            </p>
            <br>
          </div>
          <H1>Станция № <span id=curst></span></H1>
          <div class="section">
            <div class=bold2>Подробно
              <div class="OffOn">
                <input type="checkbox" checked id="Full" onclick="full()" class="OffOn">
                <label for="Full"></label>
              </div>
            </div>
            <p>
              <span class=bold1>Имя: </span>
              <span id=name></span> &nbsp;&nbsp;
              <img id="icon" src="/" alt="" height="16" width="16">
            </p>
            <p>
              <span id=ldescr>
                <span class=bold1>Описание: </span>
                <span id=descr></span>
              </span>
            </p>
            <p>
              <span id=lnot1>
                <span class=bold1>Заметка: </span>
                <span id=not1></span>
                <span id=not2></span>
              </span>
            </p>
            <p>
              <span id=lgenre>
                <span class=bold1>Жанр: </span>
                <span id=genre></span>
              </span>
            </p>
            <p>
              <span id=lurl>
                <span class=bold1>URL: </span>
                <a target=_blank id=url2 href="">
                  <span id=url1></span>
                </a>
              </span>
            </p>
            <p>
              <span id=lbitr>
                <span class=bold1>Битрейт: </span>
                <span id=bitr></span>
              </span>
            </p>
            <br>
          </div>
          <H1>
            Быстрое воспроизведение &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="button" onClick="editInstantStation()" value="Добавить и править">
          </H1>
          <div class="section">
            <span class=bold1>Полный URL: </span>
            <input type="text" id=instant_URL name=URL onkeyup="parseURL()" onmouseup="parseEditURL()">
            <br>
            <span class=bold1>Короткий URL: </span>
            <input type="text" id=instant_url name=url onkeyup="buildURL()">
            <br>
            <span class=bold1>Порт: </span>
            <input type="text" id=instant_port name=port value=80 onkeyup="buildURL()">
            <br>
            <span class=bold1>Путь: </span>
            <input type="text" id=instant_path name=path value="/" onkeyup="buildURL()">
            <br>
            <br>
            <div class="icons">
              <div class="icons8" title="Быстрое воспроизведение станции" onClick="instantPlay()">
                <i class="icono-play"></i>
              </div>
              <div class="icons8" title="Остановить быстрое воспроизведение станции" onClick="stopStation()">
                <i class="icono-stop"></i>
              </div>
            </div>
            <!-- <input type="button" value=Play onClick="instantPlay()">&nbsp; <input type="button" value="Стоп" onClick="stopStation()"> -->
            <br>
          </div>
          <H1>Мониторинг</H1>
          <div class="section">
            <div class="icons">
              <div class="icons8" title="Запуск мониторинга" onClick="mplay()">
                <i class="icono-play"></i>
              </div>
              <div class="icons8" title="Остановка мониторинга" onClick="mstop()">
                <i class="icono-stop"></i>
              </div>
              <!-- <input type="button" value=Play onClick="mplay()"> &nbsp; <input type="button" value="Стоп" onClick="mstop()"></p> -->
            </div>
            <p>
              <br>
              <span class=bold2>Громкость</span>
              <br>
              <input type=range id=volm_range name=volm onChange="mvol(this.value/100)" min=0 max=100 style="height:25px;">
            </p>
            <audio id=audio src="/" class=audio_sound onerror="monerror()">
              Мне жаль; ваш браузер не поддерживает HTML5 <code>audio</code>.
            </audio>

          </div>
          <H1>
            Режим сна / Пробуждение&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id=time>time</span>
          </H1>
          <div class="section">
            <p id=sw1>
              <span class=bold1 title="Режим времени: ЧЧ:ММ или Режим задержки (минуты): ММ">ВЫКЛ :
              </span>
              <input type="text" id=sleepdelay onkeyup="sleepup(event)"> &nbsp;
              <input type="button" value="Старт" onClick="startSleep()">
              <input type="button" value="Стоп" onClick="stopSleep()"> &nbsp;&nbsp;Через: <span id=sminutes>0</span> сек.
            </p>
            <p id=sw2>
              <span class=bold1 title="Режим времени: ЧЧ:ММ или Режим задержки (минуты): ММ">ВКЛ :
              </span>
              <input type="text" id=wakedelay onkeyup="wakeup(event)"> &nbsp;
              <input type="button" value="Старт" onClick="startWake()">
              <input type="button" value="Стоп" onClick="stopWake()"> &nbsp;&nbsp;Через: <span id=wminutes>0</span> сек.
            </p>
            <br>
          </div>

        </div>
        <!-- END PLAY РАДИО -->
        <div>
          <!-- СТАНЦИИ -->
          <H1>Менеджер станций</H1>
          <div class="section">
            <p>
              <input type="button" onclick="saveTextAsFile()" value="Сохранить станции из Радиолы">
              <span style="display:inline-block;"> &nbsp;&nbsp;в &nbsp;&nbsp;&nbsp;<input type="text" style="width:300px;color:black;" value="WebStations.txt" id="filesave"> </span>
              <br>
              <br>
              <input type="button" onclick="downloadStations()" value="Загрузить станции в Радиолу">
              <span style="display:inline-block;"> &nbsp;&nbsp;из <input type="file" style="width:300px;color:black;" id="fileload" /> </span> <br>
              <input type="button" id="refresh" title="Это перезагрузит станции в Радиоле" onclick="refreshList()" value="Обновить локальный список" /> <input type="button" id="stsave" disabled style="margin:0px auto" title="Это сохранит все станции в Радиоле" onclick="stChanged()" value="Сохранить список" /> <input type="button" style="margin:0px auto" id="clear" title="Предупреждение: Это удалит все станции. Обязательно сохраните их раньше." onclick="clearList()" value="Удалить всё" /> <input type="button" style="margin:0px auto" id="print" title="Печать всего списка станций на принтере" onclick="printList()" value="Печатать всё" />
            </p>
            <br>
            <span>Вы можете перетаскивать любую строку, чтобы отсортировать список</span>
            <br>
            <table id=stationsTable style="table-layout: fixed; width: 100%;">
              <thead>
                <tr>
                  <td style="width:5%;text-align: center; vertical-align: middle;">№</td>
                  <td style="width:38%; ">Имя</td>
                  <td style="width:45%; ">URL</td>
                  <td style="width:3%;text-align: center; vertical-align: middle;">Громк</td>
                  <td style="width:9%;text-align: center; vertical-align: middle;">Правка</td>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <!-- END СТАНЦИИ -->
        <div>
          <!-- ЗВУК -->
          <div data-tabs>
            <div onclick="tabbis.onClick(1,0);hardware(1)" class="active">КОМП</div>
            <div onclick="tabbis.onClick(1,1);hardware(1)" class="">РАДИО</div>
            <div onclick="tabbis.onClick(1,2);hardware(1)" class="">БЛЮТУЗ</div>
          </div>
          <br>
          <div id="barTDA7313" style="display: block;">
            <H1>TDA7313</H1>
            <div class="section">
              <p>
                <input class="checkbox" id="mute" type="checkbox" onclick="mute(1)">
                <label for="mute">ЗВУК:&emsp;&emsp;&emsp;&ensp;&ensp;&emsp;&emsp;&emsp;ВЫКЛ&emsp;&emsp;&emsp;&ensp;ВКЛ</label>
                <br>

                <span class="bold2">Громкость: </span> &nbsp;&nbsp;<span id="Volume_span">0 дБ</span>
                <br>
                <input type="range" id="Volume_range" name="Volume" onchange="onTDAchange('Volume')" min="0" max="17" style="height:25px;">
              </p>
              <p>
                <span class="bold2">Низкие частоты: </span> &nbsp;&nbsp;<span id="Bass_span">0 дБ</span>
                <br>
                <input type="range" id="Bass_range" name="Bass" onchange="onTDAchange('Bass')" min="0" max="14" style="height:25px;">
              </p>
              <p>
                <span class="bold2">Высокие частоты: </span> &nbsp;&nbsp;<span id="Treble_span">0
                  дБ</span>
                <br>
                <input type="range" id="Treble_range" name="Treble" onchange="onTDAchange('Treble')" min="0" max="14" style="height:25px;">
              </p>
              <span style="font-weight: bold;">ПЕРЕДНИЕ ДИНАМИКИ:</span>
              <br>
              <br>
              <table id="Front">
                <tbody>
                  <tr>
                    <td><span class="bold">Левый канал: </span> &nbsp;&nbsp;<span id="AttLF_span">0
                        дБ</span>
                    </td>
                    <td><span class="bold">Правый канал: </span> &nbsp;&nbsp;<span id="AttRF_span">0
                        дБ</span>
                    </td>
                  </tr>
                  <tr>
                    <td><input type="range" id="AttLF_range" name="AttLF" onchange="onTDAchange('AttLF')" min="0" max="13" style="height:25px;">
                    </td>
                    <td><input type="range" id="AttRF_range" name="AttRF" onchange="onTDAchange('AttRF')" min="0" max="13" style="height:25px;">
                    </td>
                  </tr>
                </tbody>
              </table>
              <br>
              <br>
              <input class="checkbox" id="rearON" type="checkbox" onclick="clickrear()">
              <label for="rearON">Задние динамики:&ensp;ВЫКЛ&emsp;&emsp;&emsp;&ensp;ВКЛ</label>
              <br>
              <br>
              <table id="Rear" style="display: none;">
                <tbody>
                  <tr>
                    <td><span class="bold">Левый канал: </span> &nbsp;&nbsp;<span id="AttLR_span">0
                        дБ</span>
                    </td>
                    <td><span class="bold">Правый канал: </span> &nbsp;&nbsp;<span id="AttRR_span">0
                        дБ</span>
                    </td>
                  </tr>
                  <tr>
                    <td><input type="range" id="AttLR_range" name="AttLR" onchange="onTDAchange('AttLR')" min="0" max="13" style="height:25px;">
                    </td>
                    <td><input type="range" id="AttRR_range" name="AttRR" onchange="onTDAchange('AttRR')" min="0" max="13" style="height:25px;">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div data-panes>
            <div id="audioinput1" style="border: none;" class="active">
              <!-- КОМП -->
              <H1>Тонкомпенсация</H1>
              <div class="section">
                <input class="checkbox" id="loud1" type="checkbox" onclick="clickloud()"> <label for="loud1">Тонкомпенсация:&ensp;&ensp;ВЫКЛ&emsp;&emsp;&emsp;&ensp;ВКЛ</label>
                <br>
                <br>
              </div>
              <H1>Предусиление</H1>
              <div class="section">
                <span class="bold">Предусиление: </span> <input type="range" id="sla1_range" onchange="onTDAchange('sla1')" name="SLA1" min="0" max="3">
                <span id="sla1_span">0 дБ</span>
                <br>
                <br>
              </div>
            </div>
            <!-- END КОМП -->
            <div id="audioinput2" style="border: none;" class="">
              <!-- РАДИО -->
              <div id="barTDA7313radio" style="display: block;">
                <H1>Тонкомпенсация</H1>
                <div class="section">
                  <input class="checkbox" id="loud2" type="checkbox" onclick="clickloud()"> <label for="loud2">Тонкомпенсация:&ensp;&ensp;ВЫКЛ&emsp;&emsp;&emsp;&ensp;ВКЛ</label>
                  <br>
                  <br>
                </div>
                <H1>Предусиление</H1>
                <div class="section">
                  <span class="bold">Предусиление:
                  </span> <input type="range" id="sla2_range" name="SLA2" onchange="onTDAchange('sla2')" min="0" max="3">
                  <span id="sla2_span">0 дБ</span>
                  <br>
                  <br>
                </div>
              </div>
              <H1>VS1053</H1>
              <div class="section">
                <span class="bold">Усиление высоких частот: </span> <input type="range" id="treble_range" name="treble" onchange="onRangeChange('treble_range', 'treble_span', 1.5, false)" min="-8" max="7"> <span id="treble_span">0 дБ</span>
                <br>
                <span class="bold">Высокие частоты: </span>
                <input type="range" id="treblefreq_range" name="treblefreq" onchange="onRangeChangeFreqTreble('treblefreq_range', 'treblefreq_span', 1, false)" min="1" max="15">
                <span id="treblefreq_span">От 1 кГц</span>
                <br>
                <span class="bold">Усиление басов: </span> <input type="range" id="bass_range" name="bass" onchange="onRangeChange('bass_range', 'bass_span', 1, false)" min="0" max="15"> <span id="bass_span">0
                  дБ</span>
                <br>
                <span class="bold">Низкие частоты: </span> <input type="range" id="bassfreq_range" name="bassfreq" onchange="onRangeChangeFreqBass('bassfreq_range', 'bassfreq_span', 10, false)" min="2" max="15"> <span id="bassfreq_span">До 20 Гц</span>
                <br>
                <span class="bold">Объёмный звук: </span> <input type="range" id="spacial_range" name="spacial" onchange="onRangeChangeSpatial('spacial_range', 'spacial_span')" min="0" max="3"> <span id="spacial_span">Выкл</span> <br>
                <span class="bold"></span> <input type="button" value="Сброс" onclick="resetEQ()">
                <br>
                <span class="bold">Громкость: </span> <input type="range" id="vol_range" name="vol" onchange="onRangeVolChange(this.value,true)" value="100" min="0" max="254"> <span id="vol_span">-19.5
                  дБ</span>
                <br>
                <br>
              </div>
            </div>
            <!-- END РАДИО -->
            <div id="audioinput3" style="border: none;" class="">
              <!-- БЛЮТУЗ -->
              <H1>Тонкомпенсация</H1>
              <div class="section">
                <input class="checkbox" id="loud3" type="checkbox" onclick="clickloud()"> <label for="loud3">Тонкомпенсация:&ensp;&ensp;ВЫКЛ&emsp;&emsp;&emsp;&ensp;ВКЛ</label>
                <br>
                <br>
              </div>
              <H1>Предусиление</H1>
              <div class="section">
                <span class="bold">Предусиление:
                </span> <input type="range" id="sla3_range" name="SLA3" onchange="onTDAchange('sla3')" min="0" max="3">
                <span id="sla3_span">0 дБ</span>
                <br>
                <br>
              </div>
            </div>
            <!-- END БЛЮТУЗ -->
          </div>
        </div>
        <!-- END ЗВУК -->
        <div>
          <!-- НАСТРОЙКИ -->
          <div data-tabs>
            <div class="active">WIFI</div>
            <div>GPIOS</div>
            <div>ПУЛЬТ</div>
            <div>ОПЦИИ</div>
            <div>UPDATE</div>
          </div>
          <div data-panes>
            <div class="active">
              <!-- СЕТЬ WI-FI -->
              <H1>
                Wifi и Сеть &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="Сохранить" onclick="valid()" />
              </H1>
              <div class="section">
                <table>
                  <tbody>
                    <tr>
                      <td><span class="bold">SSID</span></td>
                      <td>1: <input id="ssid" type="text"></td>
                      <td>2: <input id="ssid2" type="text"></td>
                    </tr>
                    <tr>
                      <td><span class="bold">ПАРОЛЬ</span></td>
                      <td>1: <input id="passwd" type="password"></td>
                      <td>2: <input id="passwd2" type="password"></td>
                    </tr>
                    <tr>
                      <td><span class="bold">DHCP</span></td>
                      <td>1: <input id="dhcp" onclick="clickdhcp()" type="checkbox"></td>
                      <td>2: <input id="dhcp2" onclick="clickdhcp()" type="checkbox"></td>
                    </tr>
                    <tr>
                      <td><span class="bold">АДРЕС</span></td>
                      <td>1: <input id="ip" oninput="chkip(this)" type="text"></td>
                      <td>2: <input id="ip2" oninput="chkip(this)" type="text"></td>
                    </tr>
                    <tr>
                      <td><span class="bold">МАСКА</span></td>
                      <td>1: <input id="mask" oninput="chkip(this)" type="text" value="255.255.255.0"></td>
                      <td>2: <input id="mask2" oninput="chkip(this)" type="text" value="255.255.255.0"></td>
                    </tr>
                    <tr>
                      <td><span class="bold">ШЛЮЗ</span></td>
                      <td>1: <input id="gw" oninput="chkip(this)" type="text"></td>
                      <td>2: <input id="gw2" oninput="chkip(this)" type="text"></td>
                    </tr>
                    <tr>
                      <td><span class="bold">USER AGENT</span></td>
                      <td colspan="2" rowspan="1">&nbsp;&nbsp;&nbsp;&nbsp;<input id="ua" type="text" value=""></td>
                    </tr>
                    <tr>
                      <td><span class="bold">ИМЯ ХОСТА MDNS</span></td>
                      <td>&nbsp;&nbsp;&nbsp;&nbsp;<input id="host" type="text" value=""></td>
                      <td><span class="bold">.local</span></td>
                    </tr>
                    <tr>
                      <td><span class="bold">MAC АДРЕС</span></td>
                      <td colspan="2" id="Mac" rowspan="1"></td>
                    </tr>
                  </tbody>
                </table>
                <br>
              </div>
            </div>
            <!-- END СЕТЬ WI-FI -->
            <div>
              <!-- GPIOS -->
              <H1>НАЗНАЧЕНИЕ GPIO &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="Считать значения по-умолчанию" onclick="gpios(0,0,0)">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" value="Считать значения из NVS" onclick="gpios(1,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="Сохранить значения в NVS" onclick="gpios(1,1,0)">
              </H1>
              <div class="section">
                <div>
                  СТАТУС:
                </div>
                <div id="GPIOsErr"></div>
                <br>
                <table id="GPIOsTable">
                  <tbody>
                    <tr>
                      <td>ИМЯ GPIO</td>
                      <td>ЗНАЧЕНИЕ</td>
                    </tr>
                    <tr>
                      <td>SPI</td>
                      <td contenteditable="true" id="K_SPI"></td>
                    </tr>
                    <tr>
                      <td>MISO</td>
                      <td contenteditable="true" id="P_MISO"></td>
                    </tr>
                    <tr>
                      <td>MOSI</td>
                      <td contenteditable="true" id="P_MOSI"></td>
                    </tr>
                    <tr>
                      <td>CLK</td>
                      <td contenteditable="true" id="P_CLK"></td>
                    </tr>
                    <tr>
                      <td>XCS</td>
                      <td contenteditable="true" id="P_XCS"></td>
                    </tr>
                    <tr>
                      <td>XDCS</td>
                      <td contenteditable="true" id="P_XDCS"></td>
                    </tr>
                    <tr>
                      <td>DREQ</td>
                      <td contenteditable="true" id="P_DREQ"></td>
                    </tr>
                    <tr>
                      <td>ENC0_A</td>
                      <td contenteditable="true" id="P_ENC0_A"></td>
                    </tr>
                    <tr>
                      <td>ENC0_B</td>
                      <td contenteditable="true" id="P_ENC0_B"></td>
                    </tr>
                    <tr>
                      <td>ENC0_BTN</td>
                      <td contenteditable="true" id="P_ENC0_BTN"></td>
                    </tr>
                    <tr>
                      <td>I2C_SCL</td>
                      <td contenteditable="true" id="P_I2C_SCL"></td>
                    </tr>
                    <tr>
                      <td>I2C_SDA</td>
                      <td contenteditable="true" id="P_I2C_SDA"></td>
                    </tr>
                    <tr>
                      <td>LCD_CS</td>
                      <td contenteditable="true" id="P_LCD_CS"></td>
                    </tr>
                    <tr>
                      <td>LCD_A0</td>
                      <td contenteditable="true" id="P_LCD_A0"></td>
                    </tr>
                    <tr>
                      <td>IR_SIGNAL</td>
                      <td contenteditable="true" id="P_IR_SIGNAL"></td>
                    </tr>
                    <tr>
                      <td>BACKLIGHT</td>
                      <td contenteditable="true" id="P_BACKLIGHT"></td>
                    </tr>
                    <tr>
                      <td>TACHOMETER</td>
                      <td contenteditable="true" id="P_TACHOMETER"></td>
                    </tr>
                    <tr>
                      <td>FAN_SPEED</td>
                      <td contenteditable="true" id="P_FAN_SPEED"></td>
                    </tr>
                    <tr>
                      <td>DS18B20</td>
                      <td contenteditable="true" id="P_DS18B20"></td>
                    </tr>
                    <tr>
                      <td>TOUCH_CS</td>
                      <td contenteditable="true" id="P_TOUCH_CS"></td>
                    </tr>
                    <tr>
                      <td>BUZZER</td>
                      <td contenteditable="true" id="P_BUZZER"></td>
                    </tr>
                    <tr>
                      <td>RXD</td>
                      <td contenteditable="true" id="P_RXD"></td>
                    </tr>
                    <tr>
                      <td>TXD</td>
                      <td contenteditable="true" id="P_TXD"></td>
                    </tr>
                    <tr>
                      <td>LDR</td>
                      <td contenteditable="true" id="P_LDR"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- END GPIOS -->
            <div>
              <!-- ИК-ПУЛЬТ -->
              <H1>КОДЫ ИК-ПУЛЬТА &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="Считать значения по-умолчанию" onclick="ircodes(0,0)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" value="Считать значения из NVS" onclick="ircodes(1,0)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="Сохранить значения в NVS" onclick="ircodes(1,1)">
              </H1>
              <div class="section">
                <table>
                  <!--  align="left" cellpadding="5" cellspacing="5" id="IRcodesTable" summary="Коды ИК-пульта" -->
                  <caption>ИК-ПУЛЬТ</caption>
                  <tbody>
                    <tr>
                      <td>КОМАНДА</td>
                      <td>КНОПКА</td>
                      <td>КОД</td>
                      <td>ОБУЧЕНИЕ</td>
                    </tr>
                    <tr>
                      <td>Станция +</td>
                      <td id="CALL_UP">ВВЕРХ</td>
                      <td id="K_UP">&nbsp;</td>
                      <td><input onclick="training('UP')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Громкость -</td>
                      <td id="CALL_LEFT">ВЛЕВО</td>
                      <td id="K_LEFT">&nbsp;</td>
                      <td><input onclick="training('LEFT')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Старт/Стоп</td>
                      <td id="CALL_OK">ОК</td>
                      <td id="K_OK">&nbsp;</td>
                      <td><input onclick="training('OK')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Громкость +</td>
                      <td id="CALL_RIGHT">ВПРАВО</td>
                      <td id="K_RIGHT">&nbsp;</td>
                      <td><input onclick="training('RIGHT')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция -</td>
                      <td id="CALL_DOWN">ВНИЗ</td>
                      <td id="K_DOWN">&nbsp;</td>
                      <td><input onclick="training('DOWN')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 0</td>
                      <td id="CALL_0">0</td>
                      <td id="K_0">&nbsp;</td>
                      <td><input onclick="training('0')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 1</td>
                      <td id="CALL_1">1</td>
                      <td id="K_1">&nbsp;</td>
                      <td><input onclick="training('1')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 2</td>
                      <td id="CALL_2">2</td>
                      <td id="K_2">&nbsp;</td>
                      <td><input onclick="training('2')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 3</td>
                      <td id="CALL_3">3</td>
                      <td id="K_3">&nbsp;</td>
                      <td><input onclick="training('3')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 4</td>
                      <td id="CALL_4">4</td>
                      <td id="K_4">&nbsp;</td>
                      <td><input onclick="training('4')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 5</td>
                      <td id="CALL_5">5</td>
                      <td id="K_5">&nbsp;</td>
                      <td><input onclick="training('5')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 6</td>
                      <td id="CALL_6">6</td>
                      <td id="K_6">&nbsp;</td>
                      <td><input onclick="training('6')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 7</td>
                      <td id="CALL_7">7</td>
                      <td id="K_7">&nbsp;</td>
                      <td><input onclick="training('7')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 8</td>
                      <td id="CALL_8">8</td>
                      <td id="K_8">&nbsp;</td>
                      <td><input onclick="training('8')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Станция № 9</td>
                      <td id="CALL_9">9</td>
                      <td id="K_9">&nbsp;</td>
                      <td><input onclick="training('9')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Источник звука</td>
                      <td id="CALL_STAR">*</td>
                      <td id="K_STAR">&nbsp;</td>
                      <td><input onclick="training('STAR')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                    <tr>
                      <td>Часы</td>
                      <td id="CALL_DIESE">#</td>
                      <td id="K_DIESE">&nbsp;</td>
                      <td><input onclick="training('DIESE')" type="button" value="ОБУЧИТЬ"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- END ИК-ПУЛЬТ -->
            <div>
              <!-- ОПЦИИ -->
              <H1>ОПЦИИ
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" onclick="devoptions(0)" value="Обновить">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" onclick="devoptions(1)" value="Сохранить"></H1>
              <div class="section">
                <table id="OptionsTable">
                  <tbody>
                    <tr>
                      <td>Логи CMD-Консоли</td>
                      <td><select id="O_ESPLOG">
                          <option value="0">Выключить</option>
                          <option value="1">Ошибки</option>
                          <option value="2">Предупреждения</option>
                          <option value="3">Информация</option>
                          <option value="4">Отладка</option>
                          <option value="5">Подробно</option>
                        </select></td>
                    </tr>
                    <tr>
                      <td>Сервера точного времени</td>
                      <td><select id="O_NTP" onclick="NTPservers()">
                          <option value="0">по-умолчанию</option>
                          <option value="1">свои</option>
                        </select></td>
                    </tr>
                    <tr id="custom_NTP">
                      <td>Сервера пользователя</td>
                      <td>
                        <p><b>0:</b> <input id="O_NTP0" type="text"></p>
                        <p><b>1:</b> <input id="O_NTP1" type="text"></p>
                        <p><b>2:</b> <input id="O_NTP2" type="text"></p>
                        <p><b>3:</b> <input id="O_NTP3" type="text"></p>
                      </td>
                    </tr>
                    <tr>
                      <td>Часовой пояс</td>
                      <td><select id="O_TZONE" onclick="TimeZone()">
                          <option value="EET-2EEST,M3.5.0/3,M10.5.0/4">Киев, София</option>
                          <option value="EET-2">Калинингад</option>
                          <option value="MSK-3">Москва</option>
                          <option value="SAMT-4">Самара</option>
                          <option value="YEKT-5">Екатеринбург</option>
                          <option value="OMST-6">Омск</option>
                          <option value="KRAT-7">Красноярск</option>
                          <option value="IRKT-8">Иркутск</option>
                          <option value="YAKT-9">Чита</option>
                          <option value="VLAT-10">Владивосток</option>
                          <option value="SAKT-11">Южно-Сахалинск</option>
                          <option value="PETT-12">Петропавловск-Камчатский</option><!-- <option value="CUSTOMTZ">Своя зона</option> -->
                        </select></td>
                    </tr>
                    <tr id="edit_TZ">
                      <td colspan="2">Зона пользователя<input id="custom_TZ" style="margin-left: 67px;" type="text"></td>
                    </tr>
                    <tr>
                      <td>Формат вывода даты</td>
                      <td><select id="O_TIME_FORMAT">
                          <option value="0">ММ:ДД</option>
                          <option value="1">ДД:ММ</option>
                        </select></td>
                    </tr>
                    <tr>
                      <td>Поворот дисплея</td>
                      <td><select id="O_LCD_ROTA">
                          <option value="0">НЕТ</option>
                          <option value="1">ДА</option>
                        </select></td>
                    </tr>
                    <tr>
                      <td>Яркость дисплея</td>
                      <td><select id="O_LCD_BRG" onclick="displaybright()">
                          <option value="0">Не регулировать</option>
                          <option value="1">автоматически по времени</option>
                          <option value="2">автоматически от освещения</option>
                          <option value="3">вручную</option>
                        </select></td>
                    </tr>
                    <tr>
                      <td  colspan="2">
                        <div id="brightOn">
                          <div id="by_time">
                            <div>Ночной режим</div>
                            <div>С:&nbsp; &nbsp; &nbsp;<select name="begin_h">
                                <option value="0">00</option>
                                <option value="1">01</option>
                                <option value="2">02</option>
                                <option value="3">03</option>
                                <option value="4">04</option>
                                <option value="5">05</option>
                                <option value="6">06</option>
                                <option value="7">07</option>
                                <option value="8">08</option>
                                <option value="9">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                              </select>&nbsp; :&nbsp;&nbsp;<select name="begin_m">
                                <option value="0">00</option>
                                <option value="15">15</option>
                                <option value="30">30</option>
                                <option value="45">45</option>
                              </select></div>
                            <div>До:&nbsp; &nbsp;<select name="end_h">
                                <option value="0">00</option>
                                <option value="1">01</option>
                                <option value="2">02</option>
                                <option value="3">03</option>
                                <option value="4">04</option>
                                <option value="5">05</option>
                                <option value="6">06</option>
                                <option value="7">07</option>
                                <option value="8">08</option>
                                <option value="9">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                              </select>&nbsp; :&nbsp;&nbsp;<select name="end_m">
                                <option value="0">00</option>
                                <option value="15">15</option>
                                <option value="30">30</option>
                                <option value="45">45</option>
                              </select></div>
                          </div>
                          <div id="brightness">
                            <div>Уровень яркости</div>
                            <div>Дневной&nbsp; &nbsp;<input id="day_brightness" max="254" min="0" name="day_brightness" type="range" value="127"></div>
                            <div>Ночной&nbsp; &nbsp;&nbsp;<input id="night_brightness" max="254" min="0" name="night_brightness" type="range" value="127"></div>
                          </div>
                          <div id="by_lighting">
                            <div>Порог срабатывания<br>
                              <input id="brightness_trigger" max="1023" min="0" name="brightness_trigger" type="range" value="127"></div>
                          </div>
                          <div id="by_hand">
                            <div>Уровень яркости</div>
                            <input id="hand_brightness" max="254" min="0" name="hand_brightness" type="range" value="127">
                          </div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>&nbsp;</p>

                <table id="FanControlTable">
                  <tbody>
                    <tr>
                      <td>Регулировка оборотов</td>
                      <td><select id="FanControl" onclick="FanControl()">
                          <option value="0">Не регулировать</option>
                          <option value="1">Автоматическая</option>
                          <option value="2">Ручная</option>
                        </select></td>
                    </tr>
                    <tr id="not_control">
                      <td colspan="2">
                        <div id="by_auto">
                          <div>Температура срабатывания</div>
                          <div>Min:&nbsp; &nbsp;<select name="min_temp">
                              <option value="40">40</option>
                              <option value="45">45</option>
                              <option value="50">50</option>
                              <option value="55">55</option>
                              <option value="60">60</option>
                              <option value="65">65</option>
                              <option value="70">70</option>
                            </select>&nbsp;℃&nbsp; &nbsp;Max:&nbsp;
                            <select name="max_temp">
                              <option value="75">75</option>
                              <option value="80">80</option>
                              <option value="85">85</option>
                              <option value="90">90</option>
                              <option value="95">95</option>
                              <option value="100">100</option>
                              <option value="105">105</option>
                            </select>&nbsp;℃</div>
                          <div>Минимальные обороты</div>
                          <div><input id="min_pwm" max="255" min="0" name="min_pwm" type="range" value="127">
                          </div>
                        </div>
                        <div id="by_handpwm">
                          <div>Обороты</div>
                          <input id="hand_pwm" max="255" min="0" name="hand_pwm" type="range" value="127">
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <H1>ЗАГРУЗКА\СОХРАНЕНИЕ НАСТРОЕК
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" value="Загрузить настройки из файла" onclick="loadCSV()">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" value="Сохранить настройки в файл" onclick="saveCSV()"></H1>
              <div class="section">
                <table id="CSVname">
                  <tbody>
                    <tr>
                      <td>ИМЯ ФАЙЛА</td>
                      <td contenteditable="true" id="L_LABEL">new_psram.csv</td>
                    </tr>
                    <tr>
                      <td>ОПИСАНИЕ</td>
                      <td contenteditable="true" id="L_COMMENT">Это стандартная конфигурация для
                        ESP32-WROVER.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <br>
              </div>
              <H1>ДРУГОЕ</H1>
              <div class="section">
                <p><input type="button" value="Сменить тему Веб-интерфейса" onclick="theme()"><br><br><br><input class="checkbox" id="consON" type="checkbox" onclick="consoleON()">
                  <label for="consON">WEB-Консоль:&emsp;&emsp;&emsp;ВЫКЛ&emsp;&emsp;&emsp;&ensp;ВКЛ</label>
                </p>
              </div>
            </div>
            <!-- END ОПЦИИ -->
            <div>
              <!-- ОБНОВЛЕНИЯ -->
              <H1>
                Текущая версия: <span style="color: darkgreen;" id=currentrelease></span>&nbsp;&nbsp;&nbsp;Обновить до:
                <span style="color: darkred;" id=newrelease></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" value="Обновить сейчас" onclick="upgrade()" />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span id=updatefb></span>
                <br>
              </H1>
              <div class="section">
                <p>
                  <span class=bold4 id=Version></span>
                  <br>
                  <span class=bold4>Чтобы обновить или перезагрузить текущий релиз:</span>
                  <br>
                  <br>
                  <input type="button" value="Обновить сейчас" onclick="upgrade()" />
                  <br>
                  <span class=bold4 id=Infos></span>
                  <br>
                </p>
              </div>
              <H1>История:</H1>
              <div class="section">
                <input type="button" value="Загрузить" onclick="checkhistory()" />
                <br>
                <span class=bold4 id=History></span>
                <br>
              </div>
            </div>
            <!-- END ОБНОВЛЕНИЯ -->
          </div>
          <br>
        </div>
        <!-- END НАСТРОЙКИ -->
      </div>
      <div id="footer"><a href="https://github.com/SinglWolf/ESP32-Radiola" target=_blank>РАДИОЛА by SinglWolf © 2020 Все права защищены.</a>
      </div>

    </div>
    <script src="tabbis.js"></script>
    <script>
      localStorage.removeItem("tabbis");
      // var tabs = tabbis.init({
      //   tabGroup: "[data-tabs]",
      //   paneGroup: "[data-panes]",
      //   tabActive: "active",
      //   paneActive: "active",
      //   callback: function (tab, pane) {
      //     console.log(tab);
      //     console.log(pane);
      //   }
      // });
      tabbis.init();

    </script>
  </body>

</html>
